<div ng-cloak>
    <h1>Create Company</h1>

    <div class="col-xs-12" ng-show="company.errors.length">
        <div class="alert alert-danger alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <p ng-repeat="error in company.errors">{{error}}</p>
        </div>
    </div>

    <form name="createCompanyForm" method="post" ng-submit="create()">
        <div class="form-group">
            <div class="col-xs-4">
                <label>Name</label>
            </div>

            <div class="col-xs-8">
                <input type="text" placeholder="Company name" name="name" id="Company_name" class="form-control" ng-model="company.new.name">
            </div>
        </div>

        <div class="form-group clearfix">
            <div class="col-xs-4">
                <label>Parent Company</label>
            </div>
            <div class="col-xs-8">
                <select
                        chosen
                        allow-single-deselect="true"
                        data-placeholder="Choose Parent Company"
                        no-results-text="'No companies found'"
                        ng-model="company.new.parent_id"
                        class="form-control"
                        ng-options="item.id as item.name for item in company.createData.companies">
                </select>
            </div>
        </div>

        <div class="form-group">
            <div class="col-xs-4">
                <label>Description</label>
            </div>

            <div class="col-xs-8">
                <textarea placeholder="Company description" name="description" id="Company_description" class="form-control" ng-model="company.new.description"></textarea>
            </div>
        </div>

        <div class="form-group">
            <div class="col-xs-4">
                <label>Admin</label>
            </div>
            <div class="col-xs-8">
                <select
                        chosen
                        allow-single-deselect="true"
                        data-placeholder="Choose Admin"
                        no-results-text="'No users found'"
                        ng-model="company.new.users.admin"
                        class="form-control"
                        ng-options="item.user_id as (item.first_name + ' ' + item.last_name + ' <' + item.email + '>') for item in company.createData.users">
                </select>
            </div>
        </div>

        <div class="form-group">
            <div class="col-xs-4">
                <label>Users</label>
            </div>
            <div class="col-xs-8">
                <select
                        chosen
                        multiple
                        max-selection="{{company.createData.package == 'platinum'? 99999: 3}}"
                        allow-single-deselect="true"
                        data-placeholder="Choose Users"
                        no-results-text="'No users found'"
                        ng-model="company.new.users.employees"
                        class="form-control"
                        ng-options="item.user_id as (item.first_name + ' ' + item.last_name + ' <' + item.email + '>') for item in company.createData.users">
                </select>
            </div>
        </div>

        <div class="form-group">
            <div class="col-xs-4">
                <label>Site</label>
            </div>

            <div class="col-xs-8">
                <input type="text" placeholder="Company site" name="site" id="Company_site" class="form-control" ng-model="company.new.site">
            </div>
        </div>

        <div class="col-xs-4"></div>
        <div class="col-xs-8">
            <input type="submit" value="Create" class="btn btn-success">
        </div>

    </form>

</div>
